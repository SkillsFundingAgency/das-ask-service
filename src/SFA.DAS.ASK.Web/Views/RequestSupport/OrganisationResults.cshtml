@model SFA.DAS.ASK.Web.ViewModels.RequestSupport.OrganisationResultsViewModel
@{
    ViewData["Title"] = "OrganisationResults";

    var resultsCount = Model.Results.Count == 1 ? "1 results found" : Model.Results.Count.ToString() + " results found";
}

<main class="govuk-main-wrapper" id="main-content" role="main">
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h1 class="govuk-heading-xl">
                Search results for @Model.Search
            </h1>

            <form method="get" asp-action="Index" asp-controller="OrganisationResults" asp-route-requestId="@Model.RequestId">

                <div class="govuk-form-group">


                    <input class="govuk-input" asp-for="Search" type="text">
                </div>

                <button class="govuk-button" data-module="govuk-button" type="submit">
                    Search
                </button>
                @*<a asp-action="Index" asp-controller="Home" class="govuk-link das-link--button-aligned">Cancel</a>*@
                <a asp-action="Index" asp-controller="CancelSupportRequest" asp-route-requestId="@Model.RequestId" asp-route-returnAction="Index" asp-route-returnController="OrganisationSearch" class="govuk-link das-link--button-aligned">Cancel</a>

            </form>

            <hr />

            <p> @resultsCount</p>

            @if (Model.Results.Count > 0)
            {

                @foreach (var result in Model.Results)
                {
                    <form method="post" asp-controller="OrganisationResults" asp-action="Index">

                        <input type="hidden" asp-for="SelectedResult" value="@result.Id" />

                        <button class="govuk-heading-m govuk-link" type="submit"> @result.Name</button>

                        <p> @result.GetAddressString(result.Address)</p>

                        <hr />

                    </form>
                }
            }
        </div>
    </div>
</main>

